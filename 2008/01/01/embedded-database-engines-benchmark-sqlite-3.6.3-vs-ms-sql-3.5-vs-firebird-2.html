<html>
<head>
	<title>Embedded Database Engines Benchmark - SQLite 3.6.3 vs MS SQL CE 3.5 vs Firebird 2</title>
	<LINK REL=StyleSheet HREF="engin.css" TYPE="text/css" MEDIA=screen>
</head>
<body>
<h1>Embedded Database Engines Benchmark - SQLite 3.6.3 vs MS SQL CE 3.5 vs Firebird 2</h1>

<p><b>UPDATE 20-OCT-2008:</b> Instead of creating a DBCommand for each iteration, I started to use one DBCommand instance, as any normal person would do in the first place. And it chagned the results quite a bit. It looks like object initiation for Firebird is expensive. When I got the initiation out of the way Firebird excelled.</p>
I was doing some tests about embedded database engines. Here's what I've got.

<h3>How did you implement the test ? you ask</h3>
<p>Test program starts a transaction, does a bunch of inserts and commits. It measures all the time spent on insert queries and the commit that applies the changes excluding the time spent on opening the database file. There's no index columns in any of the tables.</p>

<p>This test is made for 50, 250, 500, 1000, 5000, 10000, 20000 and 50000 INSERTs.</p>

<p>You can view the code with below link.</p>

<p>
[<a href="code.php?a=v&f=EmbeddedDB.cs&t=csharp">View</a>] Source
</p>

<p>Here's the actual results with default configuration for each database engine.</p>

<pre class="console">
Testing for 50 iterations
Testing sqlite...               100,02ms        499 inserts / sec
Testing firebird...             44,0088ms       1136 inserts / sec
Testing MS SQL CE 3.5...        23,0046ms       2173 inserts / sec

Testing for 250 iterations
Testing sqlite...               99,0198ms       2524 inserts / sec
Testing firebird...             9,0018ms        27772 inserts / sec
Testing MS SQL CE 3.5...        33,0066ms       7574 inserts / sec

Testing for 500 iterations
Testing sqlite...               129,0258ms      3875 inserts / sec
Testing firebird...             14,0028ms       35707 inserts / sec
Testing MS SQL CE 3.5...        68,0136ms       7351 inserts / sec

Testing for 1000 iterations
Testing sqlite...               120,024ms       8331 inserts / sec
Testing firebird...             26,0052ms       38453 inserts / sec
Testing MS SQL CE 3.5...        135,027ms       7405 inserts / sec

Testing for 5000 iterations
Testing sqlite...               145,029ms       34475 inserts / sec
Testing firebird...             165,033ms       30296 inserts / sec
Testing MS SQL CE 3.5...        602,1204ms      8303 inserts / sec

Testing for 10000 iterations
Testing sqlite...               192,0384ms      52072 inserts / sec
Testing firebird...             209,0418ms      47837 inserts / sec
Testing MS SQL CE 3.5...        1149,2298ms     8701 inserts / sec

Testing for 20000 iterations
Testing sqlite...               450,09ms        44435 inserts / sec
Testing firebird...             466,0932ms      42909 inserts / sec
Testing MS SQL CE 3.5...        2276,4552ms     8785 inserts / sec

Testing for 50000 iterations
Testing sqlite...               639,1278ms      78231 inserts / sec
Testing firebird...             1429,2858ms     34982 inserts / sec
Testing MS SQL CE 3.5...        5674,1346ms     8811 inserts / sec
</pre>

<p>Now I'm going to turn synchronization off (with SQL command "PRAGMA synchronous = off") for sqlite engine. Which means do not synch with filesystem right away. This should increase the performance dramatically but more fragile during power/OS failures. Keep in mind that, this gives an unfair advantage to SQLite.</p>

<pre class="console">
Testing for 50 iterations
Testing sqlite...               3,0006ms        16663 inserts / sec
Testing firebird...             43,0086ms       1162 inserts / sec
Testing MS SQL CE 3.5...        23,0046ms       2173 inserts / sec

Testing for 250 iterations
Testing sqlite...               2,0004ms        124975 inserts / sec
Testing firebird...             9,0018ms        27772 inserts / sec
Testing MS SQL CE 3.5...        36,0072ms       6943 inserts / sec

Testing for 500 iterations
Testing sqlite...               4,0008ms        124975 inserts / sec
Testing firebird...             13,0026ms       38453 inserts / sec
Testing MS SQL CE 3.5...        70,014ms        7141 inserts / sec

Testing for 1000 iterations
Testing sqlite...               7,0014ms        142828 inserts / sec
Testing firebird...             24,0048ms       41658 inserts / sec
Testing MS SQL CE 3.5...        136,0272ms      7351 inserts / sec

Testing for 5000 iterations
Testing sqlite...               25,005ms        199960 inserts / sec
Testing firebird...             175,035ms       28565 inserts / sec
Testing MS SQL CE 3.5...        599,1198ms      8345 inserts / sec

Testing for 10000 iterations
Testing sqlite...               53,0106ms       188641 inserts / sec
Testing firebird...             220,044ms       45445 inserts / sec
Testing MS SQL CE 3.5...        1146,2292ms     8724 inserts / sec

Testing for 20000 iterations
Testing sqlite...               106,0212ms      188641 inserts / sec
Testing firebird...             513,1026ms      38978 inserts / sec
Testing MS SQL CE 3.5...        2316,4632ms     8633 inserts / sec

Testing for 50000 iterations
Testing sqlite...               253,0506ms      197588 inserts / sec
Testing firebird...             1318,2636ms     37928 inserts / sec
Testing MS SQL CE 3.5...        5600,1198ms     8928 inserts / sec

</pre>

<h3>Conclusion</h3>

<p>Unfortunetely there's no definitive answer.</p>
<table border="1">
	<tr style="font-weight: bold">
		<td>Engine</td>
		<td>Small INSERT set performance</td>
		<td>Large INSERT set performance</td>
		<td>Feature set</td>
		<td>Documentation</td>
		<td>Cross-platform</td>
		<td>License</td>
	</tr>
	<tr>
		<td>SQLite</td>
		<td>6898</div></td>
		<td>217544</td>
		<td>Lacks stored procedures</td>
		<td>Good</td>
		<td>Yes</td>
		<td>Public Domain</td>
	</tr>
	<tr>
		<td>SQLite (sync off)</td>
		<td>266613</td>
		<td>917658</td>
		<td colspan="4" align="center">Same as above</td>
	</tr>
	<tr>
		<td>Firebird</td>
		<td>67361</div></td>
		<td>194477</td>
		<td>Very complete</td>
		<td>Poor</td>
		<td>Yes</td>
		<td>IDPL (something like LPGL)</td>
	</tr>
	<tr>
		<td>MS SQL CE 3.5</td>
		<td>17098</div></td>
		<td>42005</td>
		<td>Very minimal</td>
		<td>Very good</td>
		<td>No</td>
		<td>Free to use and redistribute but pops-up a license agreement on the end users box.</td>
	</tr>
</table>

<br>

<table border="1" width="700px">
	<tr>
		<td colspan="2" align="center" style="font-weight: bold">Small INSERT set performance graph</td>
	</tr>
	<tr>
		<td width="150px">1. Firebird 2</td>
		<td><div style="background-color: blue; text-align: center; width: 100%;">67361</div></td>
	</tr>
	<tr>
		<td width="150px">2. MS SQL CE 3.5</td>
		<td><div style="background-color: blue; text-align: center; width: 25%;">17098</div></td>
	</tr>
	<tr>
		<td width="150px">3. SQLite 3.6.3</td>
		<td><div style="background-color: blue; text-align: center; width: 10%;">6898</div></td>
	</tr>
</table>

<br>

<table border="1" width="700px">
	<tr>
		<td colspan="2" align="center" style="font-weight: bold">Large INSERT set performance graph</td>
	</tr>
	<tr>
		<td width="150px">1. SQLite 3.6.3</td>
		<td><div style="background-color: blue; text-align: center; width: 100%;">217544</div></td>
	</tr>
	<tr>
		<td width="150px">2. Firebird 2</td>
		<td><div style="background-color: blue; text-align: center; width: 89%;">194477</div></td>
	</tr>
	<tr>
		<td width="150px">3. MS SQL CE 3.5</td>
		<td><div style="background-color: blue; text-align: center; width: 19%;">42005</div></td>
	</tr>
</table>

<p>Now, just for the record, if we include SQLite with syncronization = off parameter set, the graphs would be like this:</p>

<table border="1" width="700px">
	<tr>
		<td colspan="2" align="center" style="font-weight: bold">Small INSERT set performance graph</td>
	</tr>
	<tr>
		<td width="170px">1. SQLite 3.6.3 (sync off)</td>
		<td><div style="background-color: blue; text-align: center; width: 100%;">266613</div></td>
	</tr>
	<tr>
		<td width="170px">2. Firebird 2</td>
		<td><div style="background-color: blue; text-align: center; width: 25%;">67361</div></td>
	</tr>
	<tr>
		<td width="170px">3. MS SQL CE 3.5</td>
		<td><div style="background-color: blue; text-align: center; width: 6%;">17098</div></td>
	</tr>
	<tr>
		<td width="170px">4. SQLite 3.6.3</td>
		<td><div style="background-color: blue; text-align: center; width: 3%;">6898</div></td>
	</tr>
</table>

<br>

<table border="1" width="700px">
	<tr>
		<td colspan="2" align="center" style="font-weight: bold">Large INSERT set performance graph</td>
	</tr>
	<tr>
		<td width="170px">1. SQLite 3.6.3 (sync off)</td>
		<td><div style="background-color: blue; text-align: center; width: 100%;">917658</div></td>
	</tr>
	<tr>
		<td width="170px">2. SQLite 3.6.3</td>
		<td><div style="background-color: blue; text-align: center; width: 23%;">217544</div></td>
	</tr>
	<tr>
		<td width="170px">3. Firebird 2</td>
		<td><div style="background-color: blue; text-align: center; width: 21%;">194477</div></td>
	</tr>
	<tr>
		<td width="170px">4. MS SQL CE 3.5</td>
		<td><div style="background-color: blue; text-align: center; width: 5%;">42005</div></td>
	</tr>
</table>

<p>
<b>Small INSERT set performance</b>: Sum of insert rates of 50, 250, 500 sets.<br>
<b>Large INSERT set performance</b>: Sum of insert rates of 1000, 5000, 10000, 20000, 50000 sets.<br>
<b>Documentation</b>: This is for my taste. YMMV.<br>
<b>NOTE:</b> Feel free to crrect me on any of these.
</p>
<!--#include virtual="/footer.shtml" -->
</body>
</html>