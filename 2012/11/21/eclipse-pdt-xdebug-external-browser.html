<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Eclipse PDT + xdebug + external browser - Engin AYDOGAN's Journal</title>
        <meta name="viewport" content="width=device-width">
        <script src="//cdnjs.cloudflare.com/ajax/libs/prettify/r298/run_prettify.min.js" type="text/javascript"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.0/jquery.min.js" type="text/javascript"></script>
        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="/css/syntax.css">

        <!-- Custom CSS -->
        <link rel="stylesheet" href="/css/main.css">

    </head>
    <body>

        <div class="site">
          <div class="header">
            <h1 class="title"><a href="/">Engin AYDOGAN's Journal</a></h1>
            <a class="extra" href="/">home</a>
          </div>

          <h2>Eclipse PDT + xdebug + external browser</h2>
<p class="meta">21 Nov 2012</p>

<div class="post">
<h1>Long story short</h1>
<p>Eclipse PDT does not allow you to use external browser. You can work around this though.</p>
<p>Add these two lines to your php.ini</p>
<pre class="prettyprint">xdebug.remote_autostart = true
xdebug.idekey="ECLIPSE_DBGP"</pre>
<h1>Keep reading for details</h1>
<p>Xdebug works like this: Debugger listens for incoming connections and whenever you send a HTTP request to server, the server itself tries to connect to the debugger client.</p>
<p>To achieve this, Eclipse PDT opens a page in the internal browser with some parameters appended to the URL. These parameters tell PHP interpreter that a debug session is desired.</p>
<pre class="prettyprint">http://localhost:81/eclipse/cake/caketest/?XDEBUG_SESSION_START=ECLIPSE_DBGP&amp;KEY=13535270012515</pre>
<p>When opening from an external browser you don't have this, in an autmated manner. So, we use <em><strong>xdebug.remote_autostart</strong></em> parameter in php.ini. With the parameter every HTTP request you send to your server which invokes PHP interpreter makes the server try to connect to remote debugger automatically. So you are supposed to not to need the parameters in the URL above.</p>
<p>But it didn't work. So I enabled <em><strong>xdebug.remote_log</strong></em> and saw the following:</p>
<pre class="prettyprint">Log opened at 2012-11-21 19:57:02
I: Connecting to configured address/port: 127.0.0.1:9000.
I: Connected to client. :-)
-&gt; &lt;init xmlns="urn:debugger_protocol_v1" xmlns:xdebug="http://xdebug.org/dbgp/xdebug" fileuri="file:///C:/Users/Engin/Code/PHP/eclipse/cake/caketest/webroot/index.php" language="PHP" protocol_version="1.0" appid="11472" idekey="ENGIN-VAIO$"&gt;&lt;engine version="2.2.1"&gt;&lt;![CDATA[Xdebug]]&gt;&lt;/engine&gt;&lt;author&gt;&lt;![CDATA[Derick Rethans]]&gt;&lt;/author&gt;&lt;url&gt;&lt;![CDATA[http://xdebug.org]]&gt;&lt;/url&gt;&lt;copyright&gt;&lt;![CDATA[Copyright (c) 2002-2012 by Derick Rethans]]&gt;&lt;/copyright&gt;&lt;/init&gt;

-&gt; &lt;response xmlns="urn:debugger_protocol_v1" xmlns:xdebug="http://xdebug.org/dbgp/xdebug" status="stopping" reason="ok"&gt;&lt;/response&gt;

Log closed at 2012-11-21 19:57:02</pre>
<p>Then I watched the log for a successful debug session with the internal Eclipse browser.</p>
<pre class="prettyprint">
Log opened at 2012-11-21 19:58:46
I: Connecting to configured address/port: 127.0.0.1:9000.
I: Connected to client. :-)
-&gt; &lt;init xmlns="urn:debugger_protocol_v1" xmlns:xdebug="http://xdebug.org/dbgp/xdebug" fileuri="file:///C:/Users/Engin/Code/PHP/eclipse/cake/caketest/webroot/index.php" language="PHP" protocol_version="1.0" appid="2324" idekey="ECLIPSE_DBGP"&gt;&lt;engine version="2.2.1"&gt;&lt;![CDATA[Xdebug]]&gt;&lt;/engine&gt;&lt;author&gt;&lt;![CDATA[Derick Rethans]]&gt;&lt;/author&gt;&lt;url&gt;&lt;![CDATA[http://xdebug.org]]&gt;&lt;/url&gt;&lt;copyright&gt;&lt;![CDATA[Copyright (c) 2002-2012 by Derick Rethans]]&gt;&lt;/copyright&gt;&lt;/init&gt;

&lt;- feature_set -i 86 -n show_hidden -v 1
-&gt; &lt;response xmlns="urn:debugger_protocol_v1" xmlns:xdebug="http://xdebug.org/dbgp/xdebug" command="feature_set" transaction_id="86" feature="show_hidden" success="1"&gt;&lt;/response&gt;

&lt;- feature_set -i 87 -n max_depth -v 3
-&gt; &lt;response xmlns="urn:debugger_protocol_v1" xmlns:xdebug="http://xdebug.org/dbgp/xdebug" command="feature_set" transaction_id="87" feature="max_depth" success="1"&gt;&lt;/response&gt;

...
</pre>
<p>As you can see <em><strong>idekey</strong></em> is different. Hence we also used <em><strong>xdebug.ide_key</strong></em> and it all works out. Finally...</p>
<p>For the sake of completeness, here's my whole xdebug configuration from php.ini</p>
<pre class="prettyprint">
zend_extension = "c:\Users\Engin\bin\LAMP\php-5.4.8\xdebug\php_xdebug-2.2.1-5.4-vc9.dll"
xdebug.default_enable=0
xdebug.remote_enable=1
xdebug.remote_host=127.0.0.1
xdebug.remote_port=9000
xdebug.remote_handler=dbgp
xdebug.remote_mode=req
xdebug.remote_autostart = true
xdebug.remote_log="c:\Users\Engin\bin\LAMP\php-5.4.8\xdebug\log"
xdebug.idekey="ECLIPSE_DBGP"
xdebug.dump_globals=1
xdebug.dump=COOKIE,FILES,GET,POST,REQUEST,SERVER,SESSION
xdebug.dump.SERVER=REMOTE_ADDR,REQUEST_METHOD,REQUEST_URI
xdebug.show_local_vars=1
xdebug.show_mem_delta=1
xdebug.collect_includes=1
xdebug.collect_vars=1
xdebug.collect_params=4
xdebug.collect_return=1
xdebug.auto_trace=0
xdebug.trace_options=0
xdebug.trace_format=0
xdebug.trace_output_dir="c:\Users\Engin\bin\LAMP\php-5.4.8\xdebug\trace"
xdebug.trace_output_name="trace.%t"
xdebug.profiler_enable=0
xdebug.profiler_append=1
xdebug.profiler_enable_trigger=1
xdebug.profiler_output_dir="c:\Users\Engin\bin\LAMP\php-5.4.8\xdebug\profiler"
xdebug.profiler_output_name="cachegrind.out.%s.%t"
</pre>

</div>
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'enginsjournal'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    

          <div class="footer">
            <div class="contact">
              <p>
                Engin AYDOGAN<br />
                Thinker<br />
                e@ea.tl
              </p>
            </div>
            <div class="contact">
              <p>
                <a href="https://github.com/yourusername">github.com/engina</a><br />
                <a href="https://twitter.com/yourusername">twitter.com/jastsayn</a><br />
              </p>
            </div>
          </div>
        </div>
    </body>
    <script type="text/javascript">
    var k = [];
    $(document).ready(function(){
      $(document).keyup(function(e){
        k.push(e.keyCode);

        while(k.length > 3) {
          k.shift();
        }

        if(k.join() == '57,48,83') {
          document.location.href = '/90s/';
        }
      });
    });
    </script>
</html>
